(function(){var a=window.iwArgsUpload||{},l=["image/gif","image/jpeg","image/png","image/webp"],n={frame:null},v=function(e,t){if(!e)return!1;var r=e.matches||e.msMatchesSelector||e.webkitMatchesSelector;return r?r.call(e,t):!1},f=function(e,t){for(var r=e;r;){if(v(r,t))return r;r=r.parentElement}return null},o=function(e){var t=document.querySelector("div#previewImg_imageDiv img#previewImg_image");t&&(t.src=e,t.style.display=e?"":"none")},u=function(e){var t=document.querySelector("p#previewImageInfo");t&&(t.innerHTML=e)},m=function(e){var t=document.querySelector("#iw_turn_off_image_button");t&&(t.disabled=e)},w=function(){if(n.frame){var e=n.frame.state().get("selection"),t=e&&e.first?e.first():null;if(!(!t||!t.attributes)){var r=t.attributes,_=r.mime,c=r.url,b=r.id;if(l.indexOf(_)!==-1){var s=document.querySelector("#iw_upload_image");s&&(s.value=b),o(c),m(!1);var d=new Image;d.src=c,d.onload=function(){u(a.originalSize+": "+this.width+" "+a.px+" / "+this.height+" "+a.px)}}else{m(!0);var g=document.querySelector("#iw_upload_image");g&&(g.value=0),o(""),u("<strong>"+a.notAllowedImg+"</strong>")}}}},p=function(){return n.frame||(n.frame=wp.media({title:a.title,frame:a.frame,button:a.button,multiple:a.multiple,library:{type:l}}),n.frame.on("select",w)),n.frame};document.addEventListener("DOMContentLoaded",function(){var i=document.querySelector("#wpbody")||document;i.addEventListener("click",function(e){var t=f(e.target,"input#iw_upload_image_button");t&&(e.preventDefault(),p().open())}),document.addEventListener("click",function(e){var t=f(e.target,"#iw_turn_off_image_button");if(t){e.preventDefault(),t.disabled=!0;var r=document.querySelector("#iw_upload_image");r&&(r.value=0),o(""),u(a.noSelectedImg)}})})})();
